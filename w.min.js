W={render:(e,r,o,t,a,i,c,n,f,m)=>{for(c of(t=r.createShader(35633),r.shaderSource(t,"#version 300 es\nprecision highp float;in vec4 p;in vec4 c;uniform mat4 M;uniform mat4 m;out vec4 vc;out vec3 vp;void main(){gl_Position=M*p;vp=vec3(m*p);vc=c;}"),r.compileShader(t),a=r.createShader(35632),r.shaderSource(a,"#version 300 es\nprecision highp float;uniform vec3 c;uniform vec3 d;uniform vec3 a;in vec3 vp;in vec4 vc;out vec4 C;void main(){float nDotL=max(dot(d,-normalize(cross(dFdx(vp),dFdy(vp)))),0.);C=vec4(c*vc.rgb*nDotL+a*vc.rgb,1.);}"),r.compileShader(a),i=r.createProgram(),r.attachShader(i,t),r.attachShader(i,a),r.linkProgram(i),r.useProgram(i),r.clearColor(...e.clear.col,1),r.enable(2929),r.uniform3f(r.getUniformLocation(i,"c"),...e.diffuseLight.col),r.uniform3f(r.getUniformLocation(i,"d"),...e.diffuseLight.pos),r.uniform3f(r.getUniformLocation(i,"a"),...e.ambientLight.col),r.clear(16640),e.objects))[n,f]=(window?.[c.model]||cube)(),"plane"==c.model&&(c.size[2]=0),buffer(r,n,i,"p",3,5126),m=(new DOMMatrix).translate(...c.pos).rotate(...c.rot).scale(...c.size),r.uniformMatrix4fv(r.getUniformLocation(i,"m"),0,m.toFloat32Array()),r.vertexAttrib3f(r.getAttribLocation(i,"c"),...c.col),r.uniformMatrix4fv(r.getUniformLocation(i,"M"),0,new DOMMatrix([1.8/o,0,0,0,0,1.8,0,0,0,0,-1.001,-1,0,0,-.2,0]).translate(...e.camera.pos).rotate(...e.camera.rot).multiply(m).toFloat32Array()),r.drawArrays(r.TRIANGLES,0,n.length/3)}},buffer=(e,r,o,t,a,i,c)=>{e.bindBuffer(34962,e.createBuffer()),e.bufferData(34962,r,35044),e.vertexAttribPointer(c=e.getAttribLocation(o,t),a,i,0,0,0),e.enableVertexAttribArray(c)},cube=()=>[new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,1,1,1,-1,1,-1,1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,1,1,1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,1,-1,-1]),new Float32Array([1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0])];
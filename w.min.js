W={render:(e,r,t,o,a,i,n,c,f,l,m,u)=>{for(n of(r.shaderSource(o=r.createShader(35633),"#version 300 es\nprecision lowp float;in vec4 c,p,u;uniform mat4 M,m;out vec4 C,P,U;void main(){gl_Position=M*p;P=vec4(m*p);C=c;U=u;}"),r.compileShader(o),r.shaderSource(a=r.createShader(35632),"#version 300 es\nprecision lowp float;uniform vec3 c,d,a;in vec4 C,P,U;out vec4 o;uniform sampler2D s;void main(){float n=max(dot(d,-normalize(cross(dFdx(P.xyz),dFdy(P.xyz)))),0.);o=mix(texture(s,U.xy),vec4(c*C.rgb*n+a*C.rgb,1.),C.a);}"),r.compileShader(a),i=r.createProgram(),r.attachShader(i,o),r.attachShader(i,a),r.linkProgram(i),r.useProgram(i),r.clearColor(...e.clear.col,1),r.enable(2929),r.uniform3f(r.getUniformLocation(i,"c"),...e.diffuseLight.col),r.uniform3f(r.getUniformLocation(i,"d"),...e.diffuseLight.pos),r.uniform3f(r.getUniformLocation(i,"a"),...e.ambientLight.col),r.clear(16640),e.objects))r.blendFunc(770,771),r.activeTexture(33984),[c,f]=(window?.[n.model]||cube)(),r.enable(3042),r.bindBuffer(34962,r.createBuffer()),r.bufferData(34962,new Float32Array(c),35044),r.vertexAttribPointer(u=r.getAttribLocation(i,"p"),3,5126,0,0,0),r.enableVertexAttribArray(u),r.bindBuffer(34962,r.createBuffer()),r.bufferData(34962,new Float32Array(f),35044),r.vertexAttribPointer(u=r.getAttribLocation(i,"u"),2,5126,0,0,0),r.enableVertexAttribArray(u),l=(new DOMMatrix).translate(...n.pos).rotate(...n.rot).scale(...n.size),r.uniformMatrix4fv(r.getUniformLocation(i,"m"),0,l.toFloat32Array()),n.col?.length?r.vertexAttrib3f(r.getAttribLocation(i,"c"),...n.col):(r.vertexAttrib4f(r.getAttribLocation(i,"c"),0,0,0,0),m=r.createTexture(),r.pixelStorei(37441,1),r.bindTexture(3553,m),r.pixelStorei(37440,1),r.texImage2D(3553,0,6408,6408,5121,n.tex),r.generateMipmap(3553),r.bindTexture(3553,m),r.uniform1i(r.getUniformLocation(i,"s"),0)),r.uniformMatrix4fv(r.getUniformLocation(i,"M"),0,new DOMMatrix([1.8/t,0,0,0,0,1.8,0,0,0,0,-1.001,-1,0,0,-.2,0]).translate(...e.camera.pos).rotate(...e.camera.rot).multiply(l).toFloat32Array()),r.drawArrays(4,0,"plane"==n.model?6:c.length/3)}},cube=()=>[[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,1,1,1,-1,1,-1,1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,1,1,1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,1,-1,1,-1,-1,-1,1,-1,-1],[1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0]];